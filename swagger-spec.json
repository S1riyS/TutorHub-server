{"openapi":"3.0.0","paths":{"/users":{"get":{"operationId":"UserController_findAll","summary":"Retrieves all users","parameters":[],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/UserResponse"}}}}}},"tags":["Users"]}},"/users/{id}":{"get":{"operationId":"UserController_findOne","summary":"Retrieves user with given ID","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserResponse"}}}},"404":{"description":"User not found"}},"tags":["Users"]},"delete":{"operationId":"UserController_delete","summary":"Deletes user with given ID","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/DeleteResponse"}}}},"403":{"description":"User can't be deleted"}},"tags":["Users"],"security":[{"JWT-auth":[]}]}},"/users/self":{"patch":{"operationId":"UserController_update","summary":"Updates authorized user","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateUserDTO"}}}},"responses":{"200":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserResponse"}}}},"403":{"description":"User can't be updated"},"404":{"description":"User not found"}},"tags":["Users"],"security":[{"JWT-auth":[]}]}},"/tutors/{userId}":{"get":{"operationId":"TutorController_findOne","summary":"Retrieves tutor's profile with given userID","parameters":[{"name":"userId","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/FullTutorProfileResponse"}}}},"404":{"description":"User not found"}},"tags":["Tutors"]}},"/tutors/self/details":{"patch":{"operationId":"TutorController_updateDetails","summary":"Updates details of tutor profile (bio, date of birth, etc)","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateDetailsDTO"}}}},"responses":{"200":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/DetailsResponse"}}}},"403":{"description":"Access denied"}},"tags":["Tutors"]}},"/tutors/self/toggle-teaching-format":{"post":{"operationId":"TutorController_toggleTeachingFormat","summary":"Adds or removes available teaching formats (eg REMOTELY)","description":"If tutor already has this teaching format, it will be removed, otherwise it will be added","parameters":[{"name":"format","required":true,"in":"query","schema":{"enum":["REMOTELY","AT_HOME","GOES_TO_STUDENT"],"type":"string"}}],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TeachingFormatsResponse"}}}},"403":{"description":"Access denied"}},"tags":["Tutors"]}},"/tutors/self/achievements":{"post":{"operationId":"TutorController_addAchievement","summary":"Creates new achievement for authorized tutor","parameters":[],"requestBody":{"required":true,"content":{"multipart/form-data":{"schema":{"$ref":"#/components/schemas/CreateAchievementDTO"}}}},"responses":{"201":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AchievementResponse"}}}}},"tags":["Tutors"],"security":[{"JWT-auth":[]}]}},"/tutors/self/achievements/{achievementId}":{"patch":{"operationId":"TutorController_updateAchievement","summary":"Updates achievement of authorized tutor","parameters":[{"name":"achievementId","required":true,"in":"path","schema":{"type":"string"}}],"requestBody":{"required":true,"content":{"multipart/form-data":{"schema":{"$ref":"#/components/schemas/UpdateAchievementDTO"}}}},"responses":{"200":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AchievementResponse"}}}},"403":{"description":"Confirmed achievement can not be updated"},"404":{"description":"This tutor does not have such an achievement"}},"tags":["Tutors"],"security":[{"JWT-auth":[]}]},"delete":{"operationId":"TutorController_deleteAchievement","summary":"Deletes achievement of authorized tutor","parameters":[{"name":"achievementId","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/DeleteResponse"}}}},"404":{"description":"This tutor does not have such an achievement"}},"tags":["Tutors"],"security":[{"JWT-auth":[]}]}},"/tutors/{userId}/achievements/{achievementId}/confirm":{"patch":{"operationId":"TutorController_confirmAchievement","summary":"Confirmation of achievement","description":"Sets isConfirmed field of achievement to TRUE (ADMIN ONLY)","parameters":[{"name":"achievementId","required":true,"in":"path","schema":{"type":"string"}},{"name":"userId","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AchievementResponse"}}}},"404":{"description":"This tutor does not have such an achievement"}},"tags":["Tutors"],"security":[{"JWT-auth":[]}]}},"/students/{userId}":{"get":{"operationId":"StudentController_findOne","summary":"Retrieves student's profile with given userID","parameters":[{"name":"userId","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/StudentProfileResponse"}}}},"404":{"description":"Profile not found"}},"tags":["Students"]}},"/students/self/profile":{"post":{"operationId":"StudentController_createProfile","summary":"Creates profile for authorized student","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateStudentProfileDTO"}}}},"responses":{"201":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/StudentProfileResponse"}}}},"400":{"description":"This student already has a profile"},"403":{"description":"User is not student"},"404":{"description":"User not found"}},"tags":["Students"],"security":[{"JWT-auth":[]}]},"patch":{"operationId":"StudentController_updateProfile","summary":"Updates profile of authorized student","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateStudentProfileDTO"}}}},"responses":{"200":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/StudentProfileResponse"}}}},"400":{"description":"This user does not have a profile"},"404":{"description":"User not found"}},"tags":["Students"],"security":[{"JWT-auth":[]}]}},"/auth/register":{"post":{"operationId":"AuthController_register","summary":"Registration of new user","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateUserDTO"}}}},"responses":{"200":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserResponse"}}}},"400":{"description":"User with this credentials already exists"}},"tags":["Auth"]}},"/auth/login":{"post":{"operationId":"AuthController_login","summary":"User login to the system","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/LoginDTO"}}}},"responses":{"200":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TokensResponse"}}}},"401":{"description":"Incorrect email or password"}},"tags":["Auth"]}},"/auth/refresh-tokens":{"get":{"operationId":"AuthController_refreshTokens","summary":"Generates new pair of tokens (access and refresh)","parameters":[],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TokensResponse"}}}},"401":{"description":"Something wrong with token"}},"tags":["Auth"],"security":[{"cookie":[]}]}}},"info":{"title":"TutorHub REST API","description":"Documentation for TutorHub REST API","version":"1.0","contact":{}},"tags":[{"name":"Users","description":"Methods for interaction with User entities"},{"name":"Tutors","description":"Methods for interaction with tutor profiles"},{"name":"Students","description":"Methods for interaction with student profiles"},{"name":"Auth","description":"Methods for authorization"}],"servers":[],"components":{"securitySchemes":{"JWT-auth":{"scheme":"bearer","bearerFormat":"JWT","type":"http","name":"JWT","description":"Enter JWT token","in":"header"},"cookie":{"type":"apiKey","in":"cookie","name":"REFRESH_TOKEN"}},"schemas":{"UserResponse":{"type":"object","properties":{"id":{"type":"string","example":"220e47eb-0198-48b2-a401-1b5c1b34fe7b"},"email":{"type":"string","example":"test@gmail.com"},"password":{"type":"string","example":"super_secret_password"},"firstName":{"type":"string","example":"Петров"},"lastName":{"type":"string","example":"Иван"},"middleName":{"type":"string","example":"Викторович"},"imageLink":{"type":"string"},"phoneNumber":{"type":"string","example":"+78005553535"},"role":{"type":"string","example":"TUTOR","enum":["STUDENT","TUTOR","ADMIN"]}},"required":["id","email","password","firstName","lastName","middleName","imageLink","phoneNumber","role"]},"UpdateUserDTO":{"type":"object","properties":{"firstName":{"type":"string","example":"Петров"},"lastName":{"type":"string","example":"Иван"},"middleName":{"type":"string","example":"Викторович"},"imageLink":{"type":"string"},"phoneNumber":{"type":"string","example":"+78005553535"}}},"DeleteResponse":{"type":"object","properties":{"id":{"type":"string","example":"07abea78-7035-42c1-928d-1ef4f981267e"}},"required":["id"]},"DetailsResponse":{"type":"object","properties":{"bio":{"type":"string","example":"This is going to be REALLY long text..."},"birthDate":{"format":"date-time","type":"string","example":"2005-07-04T13:00:00.000Z"},"careerStartYear":{"type":"number","example":2020}}},"AchievementResponse":{"type":"object","properties":{"id":{"type":"string","example":"4028949b-0931-4954-a522-b36afeeb84f4"},"data":{"type":"string","example":"ИТМО, направление - Прикладная математика и информатика"},"startYear":{"type":"number","example":2020},"endYear":{"type":"number","example":2024},"category":{"type":"string","example":"EDUCATION","enum":["EDUCATION","EXPERIENCE","OTHER"]},"attachmentUrl":{"type":"string","example":"/static/url_to_image.png"},"isConfirmed":{"type":"boolean","example":false}},"required":["id","data","startYear","category","isConfirmed"]},"FullTutorProfileResponse":{"type":"object","properties":{"id":{"type":"string","example":"72c82fcb-1f44-43cb-af63-a6b8156f36bc"},"teachingFormats":{"type":"string","example":["REMOTELY"],"enum":["REMOTELY","AT_HOME","GOES_TO_STUDENT"]},"details":{"$ref":"#/components/schemas/DetailsResponse"},"achievements":{"type":"array","items":{"$ref":"#/components/schemas/AchievementResponse"}}},"required":["id","teachingFormats","details","achievements"]},"UpdateDetailsDTO":{"type":"object","properties":{"bio":{"type":"string","example":"This is going to be REALLY long text..."},"birthDate":{"format":"date-time","type":"string","example":"2005-07-04T13:00:00.000Z"},"careerStartYear":{"type":"number","example":2020}}},"TeachingFormatsResponse":{"type":"object","properties":{"teachingFormats":{"type":"string","example":["REMOTELY"],"enum":["REMOTELY","AT_HOME","GOES_TO_STUDENT"]}},"required":["teachingFormats"]},"CreateAchievementDTO":{"type":"object","properties":{"data":{"type":"string","example":"ИТМО, направление - Прикладная математика и информатика"},"startYear":{"type":"number","example":2020},"endYear":{"type":"number","example":2024},"category":{"type":"string","example":"EDUCATION","enum":["EDUCATION","EXPERIENCE","OTHER"]},"attachment":{"type":"string","format":"binary"}},"required":["data","startYear","category","attachment"]},"UpdateAchievementDTO":{"type":"object","properties":{"data":{"type":"string","example":"ИТМО, направление - Прикладная математика и информатика"},"startYear":{"type":"number","example":2020},"endYear":{"type":"number","example":2024},"category":{"type":"string","example":"EDUCATION","enum":["EDUCATION","EXPERIENCE","OTHER"]},"attachment":{"type":"string","format":"binary"}}},"StudentProfileResponse":{"type":"object","properties":{"id":{"type":"string","example":"72c82fcb-1f44-43cb-af63-a6b8156f36bc"},"grade":{"type":"number","example":10}},"required":["id","grade"]},"CreateStudentProfileDTO":{"type":"object","properties":{"grade":{"type":"number","example":10}},"required":["grade"]},"UpdateStudentProfileDTO":{"type":"object","properties":{"grade":{"type":"number","example":10}}},"CreateUserDTO":{"type":"object","properties":{"email":{"type":"string","example":"test@gmail.com"},"password":{"type":"string","example":"super_secret_password"},"firstName":{"type":"string","example":"Петров"},"lastName":{"type":"string","example":"Иван"},"middleName":{"type":"string","example":"Викторович"},"imageLink":{"type":"string"},"phoneNumber":{"type":"string","example":"+78005553535"},"role":{"type":"string","example":"TUTOR","enum":["STUDENT","TUTOR","ADMIN"]}},"required":["email","password","firstName","lastName","middleName","imageLink","phoneNumber","role"]},"LoginDTO":{"type":"object","properties":{"email":{"type":"string","example":"test@gmail.com"},"password":{"type":"string","example":"super_secret_password"}},"required":["email","password"]},"TokensResponse":{"type":"object","properties":{"accessToken":{"type":"string","example":"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjRmOTEyNjY1LTcxO..."}},"required":["accessToken"]}}}}